import{d as R}from"./theme.Crny8WFk.js";import{d as y,r as d,f as _,w as b,c as h,o as v,g as C,as as E,t as S,s as k,m as M,an as V,b as x,u as Y,e as z}from"./framework.B3ht97ba.js";const B=()=>T(20,10,"month",!0),T=(l,t,e,s=!1)=>{const n=[];for(let a=0;a<l;a++){const r=m(a+1,t,e);s&&(r.children=[m("firstChild"+a,t,e),m("secondChild"+a,t,e)],r.children[0].children=[m("thirdChild"+a,t,e)]),n.push(r)}return n},m=(l,t,e)=>{const s=G(t,e);return{id:l.toString(),name:"person"+l,displayStartDate:s[0].startDate,displayEndDate:s[s.length-1].endDate,timeLines:s}},G=(l=10,t)=>{const e=[];let s=g();for(let n=1;n<=l;n++){const a=R().add(s,t).format("YYYY-MM-DD"),r=s+g(),i=R().add(r,t).format("YYYY-MM-DD");s+=g(),e.push({startDate:a,endDate:i,timePoints:[],id:"timeline"+n})}return e},g=l=>Math.ceil(Math.random()*12),N=l=>{const t=[];for(let e=0;e<l;e++)t.push({id:"empty-row-"+e});return t},I={key:1},L=y({__name:"CellRender",props:{params:{}},setup(l){const t={mounted:u=>{u.focus()}},e=l,s=d(e.params.colDef.field),n=_(()=>e.params.data[s.value]),a=d(n.value);b(n,u=>{a.value=u});const r=d(!1),i=()=>{r.value=!0},w=u=>{r.value=!1,e.params.setValue(a.value)};return(u,o)=>(v(),h("div",{class:"vg-play-cell",onDblclick:i},[r.value?C((v(),h("input",{key:0,"onUpdate:modelValue":o[0]||(o[0]=c=>a.value=c),type:"text",onBlur:w},null,544)),[[E,a.value],[t]]):(v(),h("span",I,S(n.value),1))],32))}}),P={class:"gantt-container"},A=y({__name:"App",setup(l){const t=d(),e=o=>o.id,s=d([{field:"name",headerName:"name",resizable:!0,cellRendererParams:{expandable:!0}},{field:"displayStartDate",headerName:"start date",resizable:!0},{field:"displayEndDate",headerName:"end date",resizable:!0},{field:"blank",headerName:"",resizable:!1,cellStyle:{borderRight:0}}]),n=d([]),a=d([]),r=k([]),i=d({resizable:!0,suppressMovable:!0,width:150,cellRenderer:M(L),valueSetter:o=>{const c=o.colDef.field||"",p=o.newValue,D=o.data;if(D[c]=p,c==="displayStartDate"||c==="displayEndDate"){const f=D.timeLines;f&&(c==="displayStartDate"?f[0].startDate=p:f[f.length-1].endDate=p,t.value&&t.value.freshRowNodes([D]))}return!0}});V(()=>{r.value=B()});const w=o=>{n.value.splice(0),o.forEach(c=>{n.value.push(c)})},u=o=>{a.value=o};return(o,c)=>{const p=z("VueGantt3");return v(),h("div",P,[x(p,{ref_key:"vgGanttRef",ref:t,getRowId:e,columns:s.value,rows:r.value,defaultCol:i.value,headerHeight:25,getEmptyRows:Y(N),onSelectChange:w,onExpandChange:u},null,8,["columns","rows","defaultCol","getEmptyRows"])])}}});export{A as default};
